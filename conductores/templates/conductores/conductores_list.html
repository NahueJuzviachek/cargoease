{% extends "home/base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/index.css' %}" />

<div class="container my-4">

  <!-- Título principal -->
  <div class="row">
    <div class="col-12 text-center">
      <h1 class="titulo-clientes" data-i18n="drivers.title">CONDUCTORES</h1>
    </div>
  </div>

  <!-- Buscador de conductores -->
  <form method="get" class="d-flex justify-content-center my-3" role="search" aria-label="Buscar conductores">
    <div class="input-group" style="max-width: 500px; width: 100%;">
      <input type="text" name="q" value="{{ request.GET.q }}" class="form-control" placeholder="Buscar por nombre..."
             data-i18n-attr="placeholder:drivers.search_placeholder">
      <button class="btn btn-primary" type="submit" title="Buscar" data-i18n-attr="title:drivers.search_button">
        <i class="bi bi-search"></i>
      </button>
    </div>

    <!-- Botón para agregar un nuevo conductor -->
    <div class="ms-3">
      <a class="btn btn-success" href="{% url 'conductor_crear' %}" title="Agregar conductor" data-i18n-attr="title:drivers.add">
        <i class="bi bi-person-plus"></i>
      </a>
    </div>
  </form>

  <!-- Tabla de conductores -->
  <div class="table-responsive mt-3">
    <table class="table table-striped text-center">
      <thead>
        <tr>
          <th data-i18n="drivers.table.name">Nombre</th>
          <th data-i18n="drivers.table.dni">DNI</th>
          <th data-i18n="drivers.table.vehicle">Vehículo</th>
          <th data-i18n="drivers.table.license_plate">Dominio</th>
          <th data-i18n="drivers.table.actions">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for conductor in conductores %}
        <tr>
          <td>{{ conductor.nombreApellido }}</td>
          <td>{{ conductor.dni }}</td>
          <td>{{ conductor.vehiculo.marca }} {{ conductor.vehiculo.modelo }}</td>
          <td>{{ conductor.dominio }}</td>
          <td>
            <!-- Botón Editar -->
            <a class="btn btn-sm btn-outline-warning" href="{% url 'conductor_editar' conductor.pk %}" title="Editar"
               data-i18n-attr="title:buttons.edit">
              <i class="bi bi-pencil"></i>
            </a>
            <!-- Botón Eliminar -->
            <a class="btn btn-sm btn-outline-danger" href="{% url 'conductor_eliminar' conductor.pk %}" title="Eliminar"
               data-i18n-attr="title:buttons.delete">
              <i class="bi bi-trash"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" data-i18n="drivers.empty" class="text-center text-muted">No hay conductores cargados.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
