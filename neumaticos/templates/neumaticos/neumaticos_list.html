{% extends "home/base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/index.css' %}" />

<div class="container my-4">
    {% include "neumaticos/partials/_messages.html" %}

    <div class="d-flex align-items-center justify-content-between mb-3">
        <h2 class="mb-0">Control General de Neumáticos</h2>

        <div class="d-flex gap-2">
            <!-- Reubicar (swap de 2) -->
            <form id="formReubicar" method="post" action="{% url 'neumaticos_reubicar' %}"
                data-confirm="¿Desea reubicar los neumáticos seleccionados?">
                {% csrf_token %}
                <input type="hidden" name="neumaticos_ids_swap" id="neumaticos_ids_swap">
                <button type="submit" class="btn btn-primary" id="btnReubicar" disabled>Reubicar</button>
            </form>

            <!-- Recapar (máximo 2 porque limitamos selección global) -->
            <form id="formRecapar" method="post" action="{% url 'neumaticos_recapar' %}"
                data-confirm="¿Desea recapar los neumáticos seleccionados? Se reiniciarán los km.">
                {% csrf_token %}
                <input type="hidden" name="neumaticos_ids_recapar" id="neumaticos_ids_recapar">
                <button type="submit" class="btn btn-warning" id="btnRecapar" disabled>Recapar</button>
            </form>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-lg-9">
            {% with vehiculos_ctx=vehiculos_ctx caps_por_tipo=caps_por_tipo %}
            {% include "neumaticos/partials/_vehiculos_panel.html" %}
            {% endwith %}
        </div>

        <div class="col-lg-3">
            {% with almacen=almacen caps_por_tipo=caps_por_tipo %}
            {% include "neumaticos/partials/_almacen_panel.html" %}
            {% endwith %}
        </div>
    </div>
</div>

{% include "neumaticos/partials/_modal_confirm.html" %}

<script src="{% static 'neumaticos/neumaticos.js' %}"></script>
{% endblock %}